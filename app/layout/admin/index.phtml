
        <?php if ($this('error')): ?>
            <div class="alert alert-error">
                <?php if ($this('error') === 'delete_failed'): ?>
                    Не вдалося видалити вірш
                <?php elseif ($this('error') === 'toggle_failed'): ?>
                    Не вдалося змінити статус вірша
                <?php else: ?>
                    Сталася помилка
                <?php endif; ?>
            </div>
        <?php endif; ?>
        
        <a href="/admin/poetry/edit" class="btn-primary" title="Додати новий вірш">+</a>
        
        <div class="cards-container">
            <?php 
            /** @var \App\Model\Virsh $poem */
            foreach ($this('collection') as $poem): ?>
                <div class="poem-card <?= $poem('enabled') ? '' : 'disabled' ?>">
                    <h3><?= htmlspecialchars($poem('title')) ?></h3>
                    
                    <?php if ($poem->getIllustrationUrl()): ?>
                        <div class="poem-illustration">
                            <img src="<?= htmlspecialchars($poem->getIllustrationUrl()) ?>" 
                                 alt="<?= htmlspecialchars($poem('title')) ?>">
                        </div>
                    <?php endif; ?>
                    
                    <div class="poem-excerpt">
                        <?php 
                        $excerpt = mb_substr($poem('virsh'), 0, 150);
                        echo htmlspecialchars($excerpt);
                        if (mb_strlen($poem('virsh')) > 150) {
                            echo '...';
                        }
                        ?>
                    </div>
                    
                    <div class="poem-actions">
                        <a href="/admin/poetry/edit&id=<?= $poem('id') ?>" class="btn btn-edit" title="Редагувати">
                            ✎
                        </a>
                        <a href="/admin/poetry/toggle&id=<?= $poem('id') ?>" 
                           class="btn btn-toggle <?= $poem('enabled') ? 'enabled' : '' ?>"
                           title="<?= $poem('enabled') ? 'Вимкнути' : 'Увімкнути' ?>"
                           onclick="return confirm('Ви впевнені?')">
                            <?= $poem('enabled') ? '●' : '○' ?>
                        </a>
                        <a href="/admin/poetry/delete&id=<?= $poem('id') ?>" 
                           class="btn btn-delete"
                           title="Видалити"
                           onclick="return confirm('Ви впевнені, що хочете видалити цей вірш?')">
                            ×
                        </a>
                    </div>
                </div>
            <?php endforeach; ?>
        </div>

        <?php if ($this('totalPages') > 1): ?>
        <div class="pagination">
            <?php if ($this('currentPage') > 1): ?>
                <a href="/admin/index?page=<?= $this('currentPage') - 1 ?>" class="pagination-btn">←</a>
            <?php endif; ?>
            
            <span class="pagination-info">
                Сторінка <?= $this('currentPage') ?> з <?= $this('totalPages') ?>
                (всього: <?= $this('totalCount') ?>)
            </span>
            
            <?php if ($this('currentPage') < $this('totalPages')): ?>
                <a href="/admin/index?page=<?= $this('currentPage') + 1 ?>" class="pagination-btn">→</a>
            <?php endif; ?>
        </div>
        <?php endif; ?>
